
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="author" content="Eric Zhong" />
    
    <title>Git</title>
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link href="/atom.xml" rel="alternate" title="" type="application/atom+xml" />
    <link rel="stylesheet" href="/assets/themes/sext-v/css/style.css">
    <link rel="stylesheet" href="/assets/themes/sext-v/css/github.css">
    <link rel="stylesheet" href="/assets/themes/sext-v/css/fontawesome.css">
    <!--[if IE 7]>
    <link rel="stylesheet" href="/assets/themes/sext-v/css/fontawesome-ie7.css">
    <![endif]-->
    <script type="text/javascript" src="/assets/themes/sext-v/js/highlight.pack.js"></script>
    <script type="text/javascript">
      hljs.initHighlightingOnLoad();
    </script>
  </head>
  <body>
      <div id="main" role="main">
        <header>
          <div id="header">
            <h1><a title="Eric Zhong" class="" href="/">Eric Zhong</a></h1>
          </div>
          <nav>
            <span><a title="Archive" class="icon-list-ul" href="/archive.html"></a></span>
            <span><a title="Tags" class="icon-tags" href="/tags.html"></a></span>
            <span><a title="Blogroll" class="icon-link" href="/links.html"></a></span>
            <span><a title="Subscribe" class="icon-rss" href="/atom.xml"></a></span>
          </nav>
        </header>
        <div id="content">
        
<article>
  <section class="title">
    <h2>Git </h2>
  </section>
  <section class="meta">
  <span class="time">
    <time datetime="2013-09-27">2013-09-27</time>
  </span>
  
  <span class="tags">
    
    <a href="/tags.html#git" title="git">#git</a>
    
    <a href="/tags.html#tool" title="tool">#tool</a>
    
  </span>
  
  </section>
  <section class="post">
  <h2>创建</h2>

<p>初始化当前工作目录为Git仓库</p>

<pre><code>cd project_dir
git init
</code></pre>

<h2>仓库</h2>

<pre><code>git clone REPO          # 本地仓库名与远程相同
git clone REPO DIR      # 指定本地仓库名

git pull = git fetch + git merge
git pull . BRANCH       # 将指定分支合并到的当前分支

git fetch REPO master:test    # 将远程仓库的master分支抓到本地test分支（下载objects和refs）
</code></pre>

<h2>配置</h2>

<pre><code>git config --global user.name "xxx"
git config --global user.email "xxx@xxx.com"
</code></pre>

<h2>分支</h2>

<pre><code>git branch          # 创建分支
git branch -b       # 创建并切换到分支
git branch BRANCH TAG   # 基于TAG创建分支

git checkout        # 切换分支

git branch -d       # 删除已经合并到主干的分支
git branch -D       # （慎用）强制删除分支

git merge BRANCH    # 将BRANCH合并到当前分支
</code></pre>

<h2>日志</h2>

<pre><code>git show ID/TAG/Commit
git log TAG1..TAG2
git log TAG1..
git log --since="2 weeks ago"
git log BRANCH1..BRANCH2        # 不在分支1，但在分支2的日志
git log -p                          # 显示代码变更
</code></pre>

<h2>比较</h2>

<pre><code>git whatchanged -p master..BRANCH       # 分支的区别
</code></pre>

<h2>提交</h2>

<pre><code>git add             # 1、新建blob记录最新修改；2、index file添加blob链接
git commit -m "xxx"

git commit -a = git add + git commit
</code></pre>

<h2>TAG</h2>

<pre><code>git tag TAG ID      # 给commit ID一个别名
</code></pre>

<h2>搜索</h2>

<pre><code>git grep "xxx"
</code></pre>

<h2>对象</h2>

<p>对象类型</p>

<pre><code>blog        # 文件
tree        # 目录
commit      # 提交
tag         # 别名
</code></pre>

<p>命令</p>

<pre><code>git cat-file -t ID      # 查看类型
git cat-file TYPE ID    # 查看内容
git ls-tree ID          # 查看目录内容
</code></pre>

<p>关系</p>

<pre><code>commit -&gt; tree 
tree 包含 blob/tree
</code></pre>

<h2>撤销</h2>

<pre><code>git reset - FILE        # 从index file中撤销文件
git checkout - FILE     # 撤销对文件的修改（包括找回删除文件）
git checkout */Dir/File # 恢复已删除或修改的文件
git reset
</code></pre>

<h2>working tree, index file, repo</h2>

<pre><code>git add             # working tree -&gt; index file
git commit          # index file -&gt; repo
git commit -a       # working tree -&gt; index file &amp; repo

git diff            # index file -&gt; working tree
git diff --cached    # repo -&gt; index file
git diff HEAD       # repo -&gt; working tree

reset --soft         # 仅撤销commit
reset --mixed        # （默认）撤销commit和index file，保留working tree
reset --hard         # 撤销全部（commit，index file，working tree）
</code></pre>

<h2>分支表达式</h2>

<pre><code>HEAD            # 当前分支的最新提交
HEAD^           # 父母
HEAD^^          # 父母的父母
HEAD~4          # 上溯4代
HEAD^1          # 第1个父母
</code></pre>

  </section>
  
</article>


<section id="page_nav">
  
  <a href='/2013/09/04/install-openstack-from-source'>← Previous</a>
  
  
  <a href='/2013/09/28/python-lib'>Next →</a>
  
</section>



        </div>
        <footer>
          <div>
            &copy; 2013 ~ 2015 Eric Zhong | powered by jekyll | themed by <a href="http://jiangle.name" title="jiangle">jiangle</a> | fork <a href="https://github.com/ericzhong/blog" title="fork me">me</a>
          </div>
        </footer>
      </div> <!-- main -->
  </body>
</html>

